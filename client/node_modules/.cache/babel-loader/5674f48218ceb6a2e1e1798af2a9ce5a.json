{"ast":null,"code":"import _slicedToArray from\"C:/Users/nmeno/Desktop/GB_React_Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import{Modal,OverlayTrigger}from'react-bootstrap';import Axios from'../utils/API';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ResultsContainer(_ref){var results=_ref.results;var _useState=useState({title:\"\",authors:[],imageLinks:{thumbnail:\"\"},description:\"\"}),_useState2=_slicedToArray(_useState,2),viewedBook=_useState2[0],setViewedBook=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),savedBook=_useState6[0],setSavedBook=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var target=useRef(null);function viewBook(e){setViewedBook(results[e.target.parentNode.id].volumeInfo);setShowModal(true);}useEffect(function(){if(savedBook){Axios.saveBook(savedBook).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});}},[savedBook]);function saveBook(e){var allBookInfo=results[e.target.parentNode.id].volumeInfo;var authors;var description;if(!allBookInfo.authors){authors=[\"No authors listed\"];}else{authors=allBookInfo.authors;}if(!allBookInfo.description){description=\"No description written\";}else{description=allBookInfo.description;}setSavedBook({title:allBookInfo.title,authors:authors,image:allBookInfo.imageLinks.thumbnail,description:description});setShow(!show);}var saved=/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'rgba(255, 100, 100, 0.85)',padding:'2px 10px',color:'white',borderRadius:3},children:\"Book Saved Successfully!\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron p-3 border\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Results\"}),/*#__PURE__*/_jsx(\"hr\",{}),results.map(function(book,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h4\",{children:book.volumeInfo.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-auto\",id:index,children:[/*#__PURE__*/_jsx(\"button\",{onClick:viewBook,className:\"btn btn-success\",children:\"View\"}),/*#__PURE__*/_jsx(OverlayTrigger,{trigger:\"click\",placement:\"top\",overlay:saved//     <UpdatingPopover id=\"popover-contained\">{content}</UpdatingPopover>\n// }\n,children:/*#__PURE__*/_jsx(\"button\",{onClick:saveBook,className:\"ml-2 btn btn-primary\",children:\"Save\"})})]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Written By:\",book.volumeInfo.authors!==undefined&&book.volumeInfo.authors.map(function(author,index){return/*#__PURE__*/_jsxs(\"span\",{children:[\" \",author,\", \"]},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.volumeInfo.imageLinks.thumbnail,className:\"col-12 col-sm-5 col-md-3 col-lg-2\",style:{height:'auto'}}),/*#__PURE__*/_jsx(\"p\",{className:\"col-12 col-sm-7 col-md-9 col-lg-10\",children:book.volumeInfo.description})]}),/*#__PURE__*/_jsx(\"hr\",{})]},index);}),/*#__PURE__*/_jsxs(Modal,{show:showModal,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-window-close ml-auto mr-1 mt-1\",style:{cursor:\"pointer\"},onClick:function onClick(){return setShowModal(false);}}),/*#__PURE__*/_jsx(\"h4\",{className:\"ml-2\",children:viewedBook.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"ml-2\",children:[\"Written By:\",viewedBook.authors!==undefined&&viewedBook.authors.map(function(author,index){return/*#__PURE__*/_jsxs(\"span\",{children:[\" \",author,\", \"]},index);})]}),/*#__PURE__*/_jsx(\"img\",{className:\"mx-3 mb-3\",src:viewedBook.imageLinks.thumbnail?viewedBook.imageLinks.thumbnail:\"https://via.placeholder.com/300\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mx-2\",children:viewedBook.description})]})]});}export default ResultsContainer;","map":{"version":3,"sources":["C:/Users/nmeno/Desktop/GB_React_Search/client/src/components/ResultsContainer.js"],"names":["React","useEffect","useState","useRef","Modal","OverlayTrigger","Axios","ResultsContainer","results","title","authors","imageLinks","thumbnail","description","viewedBook","setViewedBook","showModal","setShowModal","savedBook","setSavedBook","show","setShow","target","viewBook","e","parentNode","id","volumeInfo","saveBook","then","res","console","log","catch","err","allBookInfo","image","saved","backgroundColor","padding","color","borderRadius","map","book","index","undefined","author","height","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { Modal, OverlayTrigger} from 'react-bootstrap';\r\nimport Axios from '../utils/API';\r\n\r\n\r\nfunction ResultsContainer({results}) {\r\n\r\n    const [viewedBook, setViewedBook] = useState({\r\n        title: \"\",\r\n        authors: [],\r\n        imageLinks: {\r\n            thumbnail: \"\"\r\n        },\r\n        description: \"\"\r\n    });\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [savedBook, setSavedBook] = useState();\r\n    const [show, setShow] = useState(false);\r\n    const target = useRef(null);\r\n    \r\n    function viewBook(e) {\r\n        setViewedBook(results[e.target.parentNode.id].volumeInfo);\r\n        setShowModal(true);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (savedBook) {\r\n            Axios.saveBook(savedBook)\r\n                .then(res => console.log(res))\r\n                .catch(err => console.log(err))\r\n        }\r\n    }, [savedBook])\r\n\r\n    function saveBook(e) {\r\n        const allBookInfo = results[e.target.parentNode.id].volumeInfo\r\n        let authors;\r\n        let description\r\n        if (!allBookInfo.authors) {\r\n            authors = [\"No authors listed\"];\r\n        } else {\r\n            authors = allBookInfo.authors\r\n        }\r\n        if (!allBookInfo.description) {\r\n            description = \"No description written\";\r\n        } else {\r\n            description = allBookInfo.description\r\n        }\r\n        setSavedBook({\r\n            title: allBookInfo.title,\r\n            authors: authors,\r\n            image: allBookInfo.imageLinks.thumbnail,\r\n            description: description\r\n        })\r\n        setShow(!show)\r\n    }\r\n\r\n    const saved = (\r\n        <div\r\n            style={{\r\n              backgroundColor: 'rgba(255, 100, 100, 0.85)',\r\n              padding: '2px 10px',\r\n              color: 'white',\r\n              borderRadius: 3,\r\n            }}\r\n          >\r\n            Book Saved Successfully!\r\n        </div>\r\n\r\n    )\r\n\r\n    return (\r\n        <div className=\"jumbotron p-3 border\">\r\n            <h4>Results</h4>\r\n            <hr/>\r\n            {\r\n                results.map((book, index) => (\r\n                    <div key={index} className=\"container-fluid mb-5\">\r\n                        <div className=\"row\">\r\n                            <h4>{book.volumeInfo.title}</h4>\r\n                            <span className=\"ml-auto\" id={index}>\r\n                                <button onClick={viewBook} className=\"btn btn-success\">View</button>\r\n                                {/* <button ref={index} onClick={saveBook} className=\"ml-2 btn btn-primary\">Save</button> */}\r\n                                    <OverlayTrigger\r\n                                    trigger=\"click\" placement=\"top\"\r\n                                    overlay={saved}\r\n                                    //     <UpdatingPopover id=\"popover-contained\">{content}</UpdatingPopover>\r\n                                    // }\r\n                                    >\r\n                                <button onClick={saveBook} className=\"ml-2 btn btn-primary\">Save</button>\r\n                                    </OverlayTrigger>\r\n                            </span>\r\n                        </div>\r\n                        <p>Written By:\r\n                            {\r\n                                book.volumeInfo.authors !== undefined &&\r\n                                book.volumeInfo.authors.map((author, index) => (\r\n                                    <span key={index}> {author}, </span>\r\n                                ))\r\n                            }\r\n                        </p>\r\n                        <div className=\"row\">\r\n                            <img src={book.volumeInfo.imageLinks.thumbnail} className=\"col-12 col-sm-5 col-md-3 col-lg-2\" style={{height: 'auto'}} />\r\n                            <p className=\"col-12 col-sm-7 col-md-9 col-lg-10\">{book.volumeInfo.description}</p>\r\n                        </div>\r\n                        <hr/>\r\n                    </div>\r\n                    \r\n                ))\r\n            }\r\n            <Modal show={showModal}>\r\n                <i className=\"fas fa-window-close ml-auto mr-1 mt-1\" style={{cursor: \"pointer\"}} onClick={() => setShowModal(false)}></i>\r\n                <h4 className=\"ml-2\">{viewedBook.title}</h4>\r\n                <p className=\"ml-2\">Written By:\r\n                    {\r\n                        viewedBook.authors !== undefined &&\r\n                        viewedBook.authors.map((author, index) => (\r\n                            <span key={index}> {author}, </span>\r\n                        ))\r\n                    }\r\n                </p>\r\n                <img className=\"mx-3 mb-3\" src={viewedBook.imageLinks.thumbnail ? viewedBook.imageLinks.thumbnail : (\"https://via.placeholder.com/300\") } />\r\n                <p className=\"mx-2\">{viewedBook.description}</p>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ResultsContainer;"]},"metadata":{},"sourceType":"module"}